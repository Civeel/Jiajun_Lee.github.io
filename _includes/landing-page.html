<div id="landing">
  <div class="landing-title">
    <h1>Hi, I&#39;m
      <span class="highlight-title">{{site.username}}</span>,
    </h1>
    <h1>
      <span id="txt-rotate" data-period="2000"
        data-rotate='["{{site.typing_text}}", "scroll down for more."]'
      >
      </span>
    </h1>
    <div class="landing-icons">
      {% if site.emails %}
      <a class="social-link email" aria-label="My E-Mail" href="javascript:void(0);" onclick="openEmailPopup()">
        <svg viewBox="0 0 200 200" class="circle">
          <circle cx="100" cy="100" r="80" />
        </svg>
        <div class="social">
          <svg class="social-svg" viewBox="0 0 48 48">
            <use x="12" y="12" width="24" height="24" viewBox="0 0 48 48" 
                 xlink:href="{{ '/assets/img/solid.svg#envelope' | prepend: site.baseurl }}"></use>
          </svg>
        </div>
        <span class="label">E-Mail</span>
      </a>
      
      <!-- 弹窗背景 -->
      <div id="email-popup-overlay" class="popup-overlay" onclick="closeEmailPopup()"></div>
      
      <!-- 弹窗 -->
      <div id="email-popup" class="popup" onclick="event.stopPropagation();">
        <h3>我的邮箱</h3>
        <div class="email-list">
          {% for email in site.emails %}
          <div class="email-item">
            <strong>{{ email.name }}:</strong>
            <span class="email-address">{{ email.address }}</span>
            <button class="copy-btn" onclick="copyEmail('{{ email.address }}')">复制</button>
          </div>
          {% endfor %}
        </div>
        <button class="close-btn" onclick="closeEmailPopup()">关闭</button>
      </div>
      
      <style>
      /* 遮罩层 */
      .popup-overlay {
        display: none;
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.5);
        z-index: 999;
      }
      
      /* 弹窗 */
      .popup {
        display: none;
        position: fixed;
        top: 50%; left: 50%;
        transform: translate(-50%, -50%);
        background: #fff;
        padding: 20px 30px;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        z-index: 1000;
        animation: popup-show 0.3s ease-out;
        width: 300px;
        max-width: 80%;
        text-align: center;
      }
      
      /* 动画 */
      @keyframes popup-show {
        from { opacity: 0; transform: translate(-50%, -45%); }
        to { opacity: 1; transform: translate(-50%, -50%); }
      }
      
      /* 邮箱列表 */
      .email-list {
        margin: 15px 0;
        text-align: left;
      }
        
      .email-item {
        display: flex;
        align-items: center;  /* 垂直居中 */
        justify-content: space-between; /* 两端对齐 */
        margin-bottom: 10px;
        min-height: 32px;  /* 保证每行高度一致 */
      }
      
      .email-item strong {
        flex-shrink: 0;
        margin-right: 5px;
      }
      
      .email-address {
        flex-grow: 1;
        font-weight: bold;
        color: #333;
        word-break: break-all; /* 允许邮箱中间换行 */
        line-height: 1.4; /* 统一行高 */
      }
      
      .copy-btn {
        flex-shrink: 0;
        padding: 4px 8px;
        font-size: 12px;
        border: none;
        background: #3498db;
        color: white;
        border-radius: 4px;
        cursor: pointer;
        height: 28px; /* 固定按钮高度 */
        display: flex;
        align-items: center;
        justify-content: center;
      }
        
      .copy-btn:hover {
        background: #2980b9;
      }
      
      /* 关闭按钮 */
      .close-btn {
        margin-top: 15px;
        padding: 8px 15px;
        border: none;
        background: #555;
        color: white;
        border-radius: 6px;
        cursor: pointer;
      }
        
      .close-btn:hover {
        background: #333;
      }

      /* 复制提示 */
      .copy-toast {
        position: fixed;
        top: 20px; /* 顶部位置 */
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 8px 15px;
        border-radius: 6px;
        font-size: 14px;
        z-index: 2000;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease, transform 0.3s ease;
      }
        
      .copy-toast.show {
        opacity: 1;
        transform: translate(-50%, 0);
      }
      </style>
      
      <script>
      function openEmailPopup() {
        document.getElementById("email-popup-overlay").style.display = "block";
        document.getElementById("email-popup").style.display = "block";
      }
        
      function closeEmailPopup() {
        document.getElementById("email-popup-overlay").style.display = "none";
        document.getElementById("email-popup").style.display = "none";
      }
      
      function copyEmail(email) {
        navigator.clipboard.writeText(email).then(() => {
          showCopyToast("已复制邮箱：" + email);
        });
      }
      
      function showCopyToast(message) {
        let toast = document.createElement("div");
        toast.className = "copy-toast";
        toast.textContent = message;
        document.body.appendChild(toast);
      
        // 延迟显示（触发动画）
        setTimeout(() => {
          toast.classList.add("show");
        }, 10);
      
        // 1.5秒后隐藏
        setTimeout(() => {
          toast.classList.remove("show");
          // 再延迟删除节点
          setTimeout(() => toast.remove(), 300);
        }, 1500);
      }
      </script>
      {% endif %}

      {% if site.github_username != null %}
        <a class="social-link" aria-label="My GitHub" target="_blank" rel="noreferrer"
          href="https://github.com/{{site.github_username}}"
        >
          <svg viewBox="0 0 200 200" class="circle">
            <circle cx="100" cy="100" r="80" />
          </svg>
          <div class="social">
            <svg class="social-svg" viewBox="0 0 48 48">
              <use x="12" y="12" width="24" height="24" viewBox="0 0 48 48" xlink:href="{{ "/assets/img/brands.svg#github" | prepend: site.baseurl }}"></use>
            </svg>
          </div>
          <span class="label">GitHub</span>
        </a>
      {% endif %}

      {% if site.codepen_username != null %}
        <a class="social-link" aria-label="My Codepen" target="_blank" rel="noreferrer"
          href="https://codepen.io/{{site.codepen_username}}"
        >
          <svg viewBox="0 0 200 200" class="circle">
            <circle cx="100" cy="100" r="80" />
          </svg>
          <div class="social">
            <svg class="social-svg" viewBox="0 0 48 48">
              <use x="12" y="12" width="24" height="24" viewBox="0 0 48 48" xlink:href="{{ "/assets/img/brands.svg#codepen" | prepend: site.baseurl }}"></use>
            </svg>
          </div>
          <span class="label">CodePen</span>
        </a>
      {% endif %}

      {% if site.dev_username != null %}
        <a class="social-link" aria-label="My DEV" target="_blank" rel="noreferrer"
          href="https://dev.to/{{site.dev_username}}"
        >
          <svg viewBox="0 0 200 200" class="circle">
            <circle cx="100" cy="100" r="80" />
          </svg>
          <div class="social">
            <svg class="social-svg" viewBox="0 0 48 48">
              <use x="12" y="12" width="24" height="24" viewBox="0 0 48 48" xlink:href="{{ "/assets/img/brands.svg#dev" | prepend: site.baseurl }}"></use>
            </svg>
          </div>
          <span class="label">DEV</span>
        </a>
      {% endif %}

      {% if site.linkedin_username != null %}
        <a class="social-link linkedin" aria-label="My LinkedIn" target="_blank"
          rel="noreferrer" href="https://www.linkedin.com/in/{{site.linkedin_username}}"
        >
          <svg viewBox="0 0 200 200" class="circle">
            <circle cx="100" cy="100" r="80" />
          </svg>
          <div class="social">
            <svg class="social-svg" viewBox="0 0 48 48">
              <use x="12" y="12" width="24" height="24" viewBox="0 0 48 48" xlink:href="{{ "/assets/img/brands.svg#linkedin-in" | prepend: site.baseurl }}"></use>
            </svg>
          </div>
          <span class="label">LinkedIn</span>
        </a>
      {% endif %}

      {% if site.twitter_username != null %}
        <a class="social-link twitter" aria-label="My Twitter" target="_blank"
          rel="noreferrer" href="https://twitter.com/{{site.twitter_username}}"
        >
          <svg viewBox="0 0 200 200" class="circle">
            <circle cx="100" cy="100" r="80" />
          </svg>
          <div class="social">
            <svg class="social-svg" viewBox="0 0 48 48">
              <use x="12" y="12" width="24" height="24" viewBox="0 0 48 48" xlink:href="{{ "/assets/img/brands.svg#twitter" | prepend: site.baseurl }}"></use>
            </svg>
          </div>
          <span class="label">Twitter</span>
        </a>
      {% endif %}
    </div>
  </div>
</div>
